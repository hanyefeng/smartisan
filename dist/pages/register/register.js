"use strict";require(["../../static/conf/config.js"],function(){require(["jquery"],function(e){e("input").on("focus",function(){e(this).parent().css("opacity",1),e(this).parent().addClass("focus").removeClass("hover"),e(this).is("[type=password]")&&e(this).parent().next().show()}).on("blur",function(){if(e(this).parent().css("opacity",.618),e(this).parent().removeClass("focus").addClass("hover"),e(".tips").hide(),""===e(this).val())e(".btn-wrapper .btn").addClass("disabled"),e(this).parent().removeClass("invalid"),e(this).nextAll(".warning").hide(),e(this).prev().css("opacity",1),e("#password").val()!==e("#repassword").val()?(e("#repassword").parent().addClass("invalid"),e("#rp-not-same").show()):(e("#repassword").parent().removeClass("invalid"),e("#rp-not-same").hide());else if("mobile"==e(this).attr("name"))if(/^1[35678]\d{9}$/.test(e(this).val())){var s=localStorage.getItem("userinfo");if(s)JSON.parse(s).some(function(s){return s.username==e(".username input").val()})&&(e(this).parent().addClass("invalid"),e(".btn-wrapper .btn").addClass("disabled"),e("#m-registered").show())}else e(this).parent().addClass("invalid"),e(".btn-wrapper .btn").addClass("disabled"),e("#m-format-error").show();else"password"==e(this).attr("name")?/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{6,16}$/.test(e(this).val())?(e(this).parent().removeClass("invalid"),e("#p-format-error").hide()):(e(this).parent().addClass("invalid"),e(".btn-wrapper .btn").addClass("disabled"),e("#p-format-error").show()):"repassword"==e(this).attr("name")&&(/^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{6,16}$/.test(e(this).val())?(e("#rp-format-error").hide(),e("#password").val()!==e("#repassword").val()?(e(this).parent().addClass("invalid"),e(".btn-wrapper .btn").addClass("disabled"),e("#rp-not-same").show()):(e("#rp-not-same").hide(),e(this).parent().removeClass("invalid"))):(e(this).parent().addClass("invalid"),e(".btn-wrapper .btn").addClass("disabled"),e("#rp-format-error").show()))}).on("input",function(){e(this).parent().removeClass("invalid"),e(this).nextAll(".warning").hide(),e(this).prev().css("opacity",0);for(var s=!0,a=0;a<e("input").length;a++)""==e("input").eq(a).val()&&(s=!1);s&&!e(".input").hasClass("invalid")?e(".btn-wrapper .btn").removeClass("disabled"):e(".btn-wrapper .btn").addClass("disabled")}),e(".checkbox").on("click",function(){e(".checkbox").is(".checked")?e(".checkbox").removeClass("checked"):e(".checkbox").addClass("checked")}),e(".btn-wrapper .btn").on("click",function(){if(!e(".btn-wrapper .btn").is(".disabled")){var s=localStorage.getItem("userinfo");if(s){var a=JSON.parse(s);a.some(function(s){return s.username==e(".username input").val()})?(e(".username .input").addClass("invalid"),e(".btn-wrapper .btn").addClass("disabled"),e("#m-registered").show()):(a.push({username:e(".username input").val(),password:e(".password input").val()}),localStorage.setItem("userinfo",JSON.stringify(a)),alert("注册成功"),location.href="../login/login.html")}else localStorage.setItem("userinfo",JSON.stringify([{username:e(".username input").val(),password:e(".password input").val()}]))}}),e(".tologin span").click(function(){location.href="../login/login.html"})})});