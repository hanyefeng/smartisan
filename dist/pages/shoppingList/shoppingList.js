"use strict";require(["../../static/conf/config.js"],function(){require(["jquery"],function(a){require(["../../scripts/common/common"],function(){!function(){if(getCookie("userinfo")){a(".login-btn").hide();var e=JSON.parse(getCookie("userinfo")).username.replace(/(.{3}).*(.{4})/,"$1******$2");a(".nav-user-avatar dt").text("+86 "+e)}else a(".login-btn").show();a(".nav-user").on("mouseenter",function(){getCookie("userinfo")&&a(".nav-user-wrapper").show()}).on("mouseleave",function(){a(".nav-user-wrapper").hide()}).on("click",function(){getCookie("userinfo")?location.href="http://localhost:9999/pages/home/home.html":location.href="http://localhost:9999/pages/login/login.html"}),a(".logout").on("click",function(){addCookie("userinfo","",-1),location.href="http://localhost:9999/pages/home/home.html"}),a(".title").nextAll().remove(),new EmptyList(a(".gray-box")),getCookie("userinfo")&&a(".login-btn").hide();var o=JSON.parse(localStorage.getItem("shoppingList")),t=0,n="";for(var i in o)n+=i+",",t++;n=n.substr(0,n.length-1),0<t&&(a(".title").nextAll().remove(),a.ajax({url:"http://localhost:8000/goodinfo?id="+n,success:function(e){r=JSON.parse(e).data.list,new shoppingTable(r,o,a(".gray-box"))}}))}();var r={};document.addEventListener(shoppingTable.REFRESH_SHOPPING_TABLE,function(e){a(".title").nextAll().remove(),new EmptyList(a(".gray-box")),getCookie("userinfo")&&a(".login-btn").hide();var o=0;for(var t in console.log(e.data),e.data)o++;0<o&&(a(".title").nextAll().remove(),new shoppingTable(r,e.data,a(".gray-box")))})})})});