"use strict";function _classCallCheck(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,t){for(var e=0;e<t.length;e++){var s=t[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,s.key,s)}}function _createClass(a,t,e){return t&&_defineProperties(a.prototype,t),e&&_defineProperties(a,e),a}var GoodsInfo=function(){function r(a,t,e){_classCallCheck(this,r),this.data=a,this.data2=t,this.parent=e,this.goods=this.createGoodsInfo(),this.fixBottom=this.createBottom(),this.tips=this.createTips()}return _createClass(r,[{key:"createGoodsInfo",value:function(){var a=$("<section>");return a.addClass("gray-box").addClass("clear_fix"),this.galleryWapper=this.createGalleryWapper(),this.galleryWapper.addClass("gallery-wrapper"),this.information=this.createInformation(),this.information.addClass("item-information"),this.galleryWapper.appendTo(a),this.information.appendTo(a),a.appendTo(this.parent),a}},{key:"createGalleryWapper",value:function(){var t=this,a=$("<div>"),e=$("<div>");e.addClass("gallery");var s=$("<figure>");s.addClass("thumbnail");for(var i=$("<ul>"),n=0;n<this.data2.shop_info.ali_images.length;n++){var d=$("<li>");0==n&&d.addClass("on"),d.on("click",function(a){$(a.currentTarget).addClass("on").siblings().removeClass("on"),t.bigImg.attr("src",$(a.currentTarget).children("img").attr("src"))});var r=$("<img>");r.attr("src",this.data2.shop_info.ali_images[n]),r.appendTo(d),d.appendTo(i)}i.appendTo(s),s.appendTo(e);var o=$("<figure>");o.addClass("tumb");var p=$("<ul>"),l=$("<li>");return l.addClass("on"),this.bigImg=$("<img>"),this.bigImg.attr("src",this.data2.shop_info.ali_images[0]),this.bigImg.appendTo(l),l.appendTo(p),p.appendTo(o),o.appendTo(e),e.appendTo(a),a}},{key:"createInformation",value:function(){var a=$("<div>");return this.titleWrap=this.createTitle(),this.titleWrap.addClass("item-title"),this.titleWrap.appendTo(a),this.createSection(a),this.number=this.createNumberDot(),this.number.addClass("item-do-count-wrapper").addClass("clear_fix"),this.number.appendTo(a),a}},{key:"createTitle",value:function(){var a=$("<article>");this.title=$("<h1>"),this.title.text(this.data.shop_info.spu_title),this.subtitle=$("<h2>"),this.subtitle.text(this.data.shop_info.highlights),this.title.appendTo(a),this.subtitle.appendTo(a);var t=$("<div>");t.addClass("item-price");var e=$("<span>"),s=$("<em>");return s.text("￥"),s.appendTo(e),this.price=$("<i>"),this.price.text(num2money(this.data2.price)+".00"),this.price.appendTo(e),e.appendTo(t),t.appendTo(a),a}},{key:"createSection",value:function(a){for(var t=this.data.shop_info.spec_v2,e=t.length,s=0;s<e;s++){var i=$("<section>");i.addClass("item-spec-wrapper").addClass("clear_fix");var n=$("<div>");n.addClass("item-spec");var d=$("<span>");d.addClass("spec-title"),d.appendTo(n);var r=$("<ul>");r.addClass("spec-info");for(var o=t[s].spec_values,p=0;p<o.length;p++){var l=$("<li>");if(l.attr("typeId",o[p].spec_id).attr("ids",o[p].id),l.on("click",this.changeStyleHandler.bind(this)),this.data2.attr_info[l.attr("typeId")].spec_value_id==l.attr("ids")&&l.addClass("active").siblings().removeClass("active"),1==t[s].spec_id){var c=$("<aside>"),h=$("<span>");h.addClass("color-box");var u=$("<i>");u.addClass("color-item");var v=$("<img>");v.attr("src",o[p].image),v.appendTo(u),u.appendTo(h),h.appendTo(c),c.appendTo(l)}var m=$("<aside>");m.addClass("specs-item").addClass("item-inline");var T=$("<h1>");T.addClass("item-name"),T.text(o[p].show_name),T.appendTo(m),m.appendTo(l),l.appendTo(r)}switch(r.appendTo(n),n.appendTo(i),i.appendTo(a),Number(t[s].spec_id)){case 1:i.addClass("item-spec-color"),d.text("颜色选择");break;case 2:i.addClass("item-spec-package"),d.text("容量选择");break;case 4:i.addClass("item-spec-package"),d.text("网络选择");case 5:i.addClass("item-spec-package"),d.text("版本选择");break;case 8:i.addClass("item-spec-package"),d.text("尺寸选择");break;case 14:i.addClass("item-spec-package"),d.text("款式选择")}}}},{key:"changeStyleHandler",value:function(a){$(a.currentTarget).addClass("active").siblings().removeClass("active"),$("li.active");var t=[];$("li.active").each(function(a){t.push({type:$(this).attr("typeId"),ids:$(this).attr("ids")})});for(var e=this.data.sku_info,s=0;s<e.length;s++)for(var i=0;i<e[s].spec_json.length&&(e[s].spec_json[i].spec_id==t[i].type&&e[s].spec_json[i].spec_value_id==t[i].ids);i++)if(i==e[s].spec_json.length-1){var n=e[s].sku_id,d=new Event(r.CHANGE_URL_EVENT);d.url=n,document.dispatchEvent(d)}}},{key:"createNumberDot",value:function(){var a=$("<section>"),t=$("<div>");t.addClass("item-do-count");var e=$("<span>");e.addClass("do-count-title"),e.text("数量选择"),e.appendTo(t);var s=$("<aside>");s.addClass("do-count");var i=$("<do-count>"),n=$("<div>");n.addClass("select");var d=$("<span>");d.addClass("down").addClass("disabled"),d.on("click",this.bnClickHandler.bind(this)),d.appendTo(n),this.num=$("<span>"),this.num.addClass("num"),this.num.text("1"),this.num.appendTo(n);var r=$("<span>");return r.addClass("up"),r.on("click",this.bnClickHandler.bind(this)),r.appendTo(n),n.appendTo(i),i.appendTo(s),s.appendTo(t),t.appendTo(a),a}},{key:"bnClickHandler",value:function(a){$(a.currentTarget).is(".disabled")||($(a.currentTarget).is(".down")?(this.num.text(Number(this.num.text())-1),Number(this.num.text())<10&&($(".up").removeClass("disabled"),Number(this.num.text())<=1&&$(".down").addClass("disabled"))):(this.num.text(Number(this.num.text())+1),1<Number(this.num.text())&&($(".down").removeClass("disabled"),10<=Number(this.num.text())&&$(".up").addClass("disabled"))),this.bottomTitle.text(this.data.shop_info.spu_title+" x "+this.num.text()),this.goodsCountPrice.text(num2money(Number(this.data2.price)*Number(this.num.text()))+".00"))}},{key:"createBottom",value:function(){var a=$("<div>");a.addClass("product-fix-bar");var t=$("<div>");t.addClass("fix-bar-wrapper");var e=$("<h1>");e.addClass("bar-text"),e.text("您已选择了"),e.appendTo(t);var s=$("<div>");s.addClass("bar-device-info");var i=$("<h1>");i.addClass("clear_fix"),this.bottomTitle=$("<span>"),this.bottomTitle.addClass("title"),this.bottomTitle.text(this.data.shop_info.spu_title+" × 1"),this.bottomTitle.appendTo(i),i.appendTo(s),this.bottomSubTitle=$("<h2>");var n="";for(var d in this.data2.attr_info)n+=this.data2.attr_info[d].value+" | ";n=n.substr(0,n.length-3),this.bottomSubTitle.text(n),this.bottomSubTitle.appendTo(s),s.appendTo(t);var r=$("<div>");r.addClass("bar-postage-fee");var o=$("<h1>"),p=$("<span>");p.addClass("title"),p.text("运费"),p.appendTo(o),o.appendTo(r);var l=$("<span>");l.addClass("price");var c=$("<i>");c.text("￥"),c.appendTo(l),this.postagePrice=$("<span>"),this.postagePrice.text(this.data.shop_info.postage_info.base_freight+".00"),this.postagePrice.appendTo(l),l.appendTo(r),r.appendTo(t);var h=$("<div>");h.addClass("bar-btn");var u=$("<a>");u.text("现在购买"),u.appendTo(h),h.appendTo(t);var v=$("<div>");v.text("加入购物车"),v.addClass("bar-btn").addClass("add-cart-btn"),v.on("click",this.toShoppingList.bind(this)),v.appendTo(t);var m=$("<div>");m.addClass("no-discount-price");var T=$("<div>");T.addClass("bar-price");var C=$("<i>");return C.text("￥"),C.appendTo(T),this.goodsCountPrice=$("<span>"),this.goodsCountPrice.text(num2money(this.data2.price)+".00"),this.goodsCountPrice.appendTo(T),T.appendTo(m),m.appendTo(t),t.appendTo(a),a.appendTo(this.parent),a}},{key:"createTips",value:function(){var a=$("<div>");a.addClass("toast-tips");var t=$("<label>");return t.text("已添至购物车"),t.appendTo(a),a.appendTo(this.parent),a}},{key:"toShoppingList",value:function(){var a=new Event(r.ADD_SHOPPINGLIST_EVENT);a.id=this.data2.id,a.num=this.num.text(),document.dispatchEvent(a)}}],[{key:"CHANGE_URL_EVENT",get:function(){return"change_url_event"}},{key:"ADD_SHOPPINGLIST_EVENT",get:function(){return"add_shoppinglist_event"}}]),r}();